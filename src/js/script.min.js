function start(){if(!isPaused){for(var e=document.getElementsByClassName("enemy"),t=0;t<e.length;t++)document.body.removeChild(e[t]);GAME_SPEED=12,isPaused=!1,document.getElementById("no").innerHTML=getCurrentScore(),pauseInfo=document.getElementById("pause-info"),invincibleCounter=0,totalBullets=10;var n=document.getElementById("total-bullets");health=MAX_LIFE,healthBar=document.getElementById("health-bar"),healthBar.innerHTML="";for(var t=0;health>t;t++)healthBar.innerHTML+="|";n.innerHTML="";for(var t=0;totalBullets>t;t++)n.innerHTML+='<img src="src/style/img/bullet.png" class="bullet-info">';document.getElementById("menu").style.display="none",setTimeout(function(){addPlayer(document.getElementById("cursor"))},200),spaceShip=document.getElementById("cursor"),playerElem=document.getElementById("player-sprite"),document.body.setAttribute("style","cursor:none"),scoreboard=document.getElementById("no"),makeObjects(),abg.play(),scoreboard.innerHTML=0,player.width=25,player.height=25,document.addEventListener("mousemove",function(e){player.x=e.clientX,player.y=e.clientY})}}function stop(){var e=scoreboard.innerHTML,t=getHighscore();document.getElementById("menu").style.display="inline-block",document.getElementById("info").innerHTML=t,document.getElementById("pscore").innerHTML="<br>Your Score : "+e,abg.pause(),abg.currentTime=0,aover.play(),setHighscore(e),document.body.removeEventListener("click",makeBullets())}function makeObjects(){game=setInterval(function(){if(!isPaused){var e=new Enemy,t=document.createElement("span");t.className="enemy",t.style.position="absolute",t.style.marginTop="-100px",t.style.marginLeft=e.left,t.style.padding=e.padding,t.style.backgroundImage="url('src/style/img/asteroid.png')",t.style.backgroundSize="cover",e.friend===!0?(t.style.backgroundImage="url('src/style/img/friend.gif-c200')",t.style.padding="40px",t.style.zIndex="999",e.health===!0&&(t.style.backgroundImage="url('src/style/img/heart.png')",t.setAttribute("isHeart","true"))):t.style.zIndex="998",t.setAttribute("MY_SPEED",getRandomInt(0,5));var n=document.body.appendChild(t);animate(n)}},getRandomInt(50,200))}function animate(e){var t=window.innerHeight,n=setInterval(function(){if(!isPaused){animation=n;var o=e.style.marginTop;if(o=o.substr(0,o.length-2),o=parseInt(o),detectCollision(e),o>t){scoreboard.innerHTML=parseInt(scoreboard.innerHTML)+1,clearInterval(animation),document.body.removeChild(e),scoreboard.innerHTML%100==0&&(GAME_SPEED--,1>GAME_SPEED&&(GAME_SPEED=1),apower.play(),document.getElementById("cursor").style.boxShadow="0px 0px 30px #f0f0f0",setTimeout(function(){document.getElementById("cursor").style.boxShadow="none"},1e3));var l=scoreboard.innerHTML;setHighscore(l)}e.style.marginTop=o+5+"px"}},GAME_SPEED+parseInt(e.getAttribute("MY_SPEED")))}function simulateMKeyPress(){var e=document.createEvent("KeyboardEvent"),t="undefined"!=typeof e.initKeyboardEvent?"initKeyboardEvent":"initKeyEvent";e[t]("keydown",!0,!0,window,!1,!1,!1,!1,40,0),document.dispatchEvent(e)}function detectCollision(e){var t=parseInt(e.style.marginLeft.substr(0,e.style.marginLeft.length-2)),n=parseInt(e.style.marginTop.substr(0,e.style.marginTop.length-2)),o=2*parseInt(e.style.padding.substr(0,e.style.padding.length-2)),l=o;if("999"!=e.style.zIndex)for(var r=0;r<activeBullets.length;r++){var a=activeBullets[r].left,i=activeBullets[r].top;if(null!==a&&null!==i&&a>=t&&t+o>=a&&i>=n&&n+l>=i)return e.style.backgroundImage="url('src/style/img/explosion.gif')",aAsteroidExplode.play(),setTimeout(function(){document.body.removeChild(e)},500),void clearInterval(animation)}if(player.x+player.width>t&&player.x-player.width<t+o&&player.y+player.height>n&&player.y-player.height<n+l){if("true"==e.getAttribute("isHeart")){if(health==MAX_LIFE)return;if(busyFlag)return;busyFlag=!0,setTimeout(function(){busyFlag=!1},500),health++,health>MAX_LIFE&&(health=MAX_LIFE),healthBar.innerHTML="";for(var r=0;health>r;r++)healthBar.innerHTML+="|";return apower.play(),void document.body.removeChild(e)}if("999"==e.style.zIndex){if(scoreboard.innerHTML=parseInt(scoreboard.innerHTML)+2,ascore.play(),e.style.display="none",document.body.style.backgroundColor="#0000ff",setTimeout(function(){document.body.style.backgroundColor="#ffff88"},100),busyFlag)return;totalBullets=parseInt(totalBullets)+1,totalBullets>10&&(totalBullets=10);var s=document.getElementById("total-bullets");s.innerHTML="";for(var r=0;totalBullets>r;r++)s.innerHTML+='<img src="src/style/img/bullet.png" class="bullet-info">';if(invincibleCounter=parseInt(invincibleCounter)+1,document.getElementById("invincible-counter").innerHTML+="I","IIIIII"==document.getElementById("invincible-counter").innerHTML&&(document.getElementById("invincible-counter").innerHTML="IIIII"),busyFlag=!0,setTimeout(function(){busyFlag=!1},500),5==invincibleCounter){invincible=!0;var u=document.getElementById("cursor");u.style.boxShadow="1px 1px 50px #0000ff";var d=document.getElementById("invincible-counter");d.style.color="blue",d.style.textShadow="1px 1px 5px #f0f0f0",document.body.style.backgroundImage="url('src/style/img/invincible.jpg')",setTimeout(function(){invincibleCounter=0,invincible=!1,d.style.color="#f0f0f0",d.innerHTML="",d.style.textShadow="none",u.style.boxShadow="none",document.body.style.backgroundImage="url('src/style/img/bg.jpg')"},5e3)}return}if(invincible)return;if(asteroidBusy)return;health--;var u=document.getElementById("cursor");u.style.boxShadow="5px 5px 50px #ff0000",setTimeout(function(){u.style.boxShadow="none"},200),abump.play(),healthBar.innerHTML="";for(var r=0;health>r;r++)healthBar.innerHTML+="|";if(asteroidBusy=!0,setTimeout(function(){asteroidBusy=!1},1e3),health>0)return;clearInterval(game),e.style.display="none",playerElem.src="src/style/img/explosion.gif",aexplode.play(),setTimeout(function(){playerElem.src="src/style/img/player.png",stop()},800)}}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function makeBullets(){if(!isPaused&&0!=totalBullets){totalBullets--,0>totalBullets&&(totalBullets=0);var e=document.getElementById("total-bullets");e.innerHTML="";for(var t=0;totalBullets>t;t++)e.innerHTML+='<img src="src/style/img/bullet.png" class="bullet-info">';var n=document.createElement("span");n.style.position="absolute",n.style.padding="5px",n.style.paddingTop="15px",n.style.backgroundImage="url('src/style/img/bullet.png')",n.style.backgroundSize="cover",n.style.marginLeft=player.x-20+"px",n.style.marginTop=player.y-20+"px",n.setAttribute("bNumber",activeBullets.length),activeBullets.push({left:player.x-20,top:player.y-20}),afire.play();var o=document.body.appendChild(n);animateBullet(o)}}function animateBullet(e){var t=setInterval(function(){isPaused||(parseInt(e.style.marginTop.substr(0,e.style.marginTop.length-2))<=-40&&(clearInterval(t),activeBullets[e.getAttribute("bNumber")].top=null,activeBullets[e.getAttribute("bNumber")].left=null,document.body.removeChild(e)),e.style.marginTop=parseInt(e.style.marginTop.substr(0,e.style.marginTop.length-2))-2+"px",activeBullets[e.getAttribute("bNumber")].top=parseInt(e.style.marginTop.substr(0,e.style.marginTop.length-2)))},2)}function getHighscore(){for(var e="score",t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var l=n[o];" "==l.charAt(0);)l=l.substring(1);if(0==l.indexOf(t))return l.substring(t.length,l.length)}return"0"}function getCurrentScore(){for(var e="cscore",t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var l=n[o];" "==l.charAt(0);)l=l.substring(1);if(0==l.indexOf(t))return l.substring(t.length,l.length)}return"0"}function setHighscore(e){if(setCurrentScore(e),!(parseInt(e)<=parseInt(high))){var t="score";document.cookie=t+"="+e+"; "}}function setCurrentScore(e){var t="cscore";document.cookie=t+"="+e+"; "}function audioToggle(){return isPaused?(document.getElementById("audio-toggle").innerHTML="Audio: off",aover.volume=0,aAsteroidExplode.volume=0,ascore.volume=0,apower.volume=0,aexplode.volume=0,afire.volume=0,abump.volume=0,void(abg.volume=0)):void(isAudio?(document.getElementById("audio-toggle").innerHTML="Audio: off",aover.volume=0,aAsteroidExplode.volume=0,ascore.volume=0,apower.volume=0,aexplode.volume=0,afire.volume=0,abump.volume=0,abg.volume=0):(document.getElementById("audio-toggle").innerHTML="Audio: on",aover.volume=1,aAsteroidExplode.volume=1,ascore.volume=1,apower.volume=1,aexplode.volume=1,afire.volume=1,abump.volume=1,abg.volume=1))}window.onload=function(){window.onfocus=function(){document.body.cursor="none",spaceShip.style.opacity="1",pauseInfo.style.display="none",isPaused=!1,audioToggle()},window.onblur=function(){isPaused||(document.body.cursor="default",spaceShip.style.opacity="0.3",pauseInfo.style.display="block",isPaused=!0,audioToggle())},document.getElementById("info").innerHTML=getHighscore(),document.getElementById("no").innerHTML=getCurrentScore(),high=getHighscore(),document.addEventListener("keypress",function(e){109==e.keyCode?(isAudio=isAudio?!1:!0,audioToggle()):112==e.keyCode?(document.body.cursor="none",spaceShip.style.opacity="1",isPaused?(pauseInfo.style.display="none",isPaused=!1):(apause.play(),document.body.cursor="default",spaceShip.style.opacity="0.3",pauseInfo.style.display="block",isPaused=!0),audioToggle()):32==e.keyCode&&makeBullets()}),aover=document.getElementById("over"),ascore=document.getElementById("point"),apower=document.getElementById("powerup"),aexplode=document.getElementById("explode"),afire=document.getElementById("fire"),apause=document.getElementById("pause"),abump=document.getElementById("bump"),abg=document.getElementById("bg"),aAsteroidExplode=document.getElementById("asteroid-explode"),abg.loop=!0};var MAX_LIFE=3,GAME_SPEED=12,activeBullets=[],health,healthBar,isPaused,pauseInfo,spaceShip,totalBullets,busyFlag=!1,asteroidBusy=!1,aover,abump,ascore,abg,apower,aAsteroidExplode,aexplode,afire,apause,high,playerElem,invincible=!1,invincibleCounter,game,animation,player={},scoreboard,Enemy=function(){this.left=getRandomInt(0,window.innerWidth)+"px",this.padding=getRandomInt(20,70)+"px",getRandomInt(0,100)<10?this.friend=!0:this.friend=!1,getRandomInt(0,100)<20?this.health=!0:this.health=!1},addPlayer=function(e){document.addEventListener("mousemove",function(t){e.style.position="absolute",e.style.marginLeft=t.clientX-60+"px",e.style.marginTop=t.clientY-60+"px",document.body.style.cursor="none"}),document.addEventListener("click",function(e){makeBullets()})},isAudio=!1;